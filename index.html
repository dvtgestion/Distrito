<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DISTRITO - Hamburguesas</title>

  <!-- CSP no HTML para permitir imagens do Unsplash e inline script/style -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 img-src 'self' https://images.unsplash.com data:;
                 script-src 'self' 'unsafe-inline';
                 style-src 'self' 'unsafe-inline';
                 connect-src 'self';
                 font-src 'self' data:;">

  <!-- Pr√©-conex√£o para reduzir lat√™ncia ao buscar imagens -->
  <link rel="preconnect" href="https://images.unsplash.com" crossorigin>

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #fff8f0;
      color: #333;
    }
    header {
      background: #2c2c2c;
      color: #fff;
      text-align: center;
      padding: 25px 10px;
      font-size: 26px;
      font-weight: bold;
    }
    header span {
      font-size: 32px;
      color: #ffcc00;
    }
    .cart-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #ff6b00;
      color: white;
      padding: 12px 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      z-index: 999;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .section-title {
      text-align: center;
      font-size: 22px;
      margin: 40px 0 20px;
      border-bottom: 2px solid #ff6b00;
      display: inline-block;
    }
    .container {
      padding: 10px 20px 50px;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .item {
      background: white;
      border-radius: 10px;
      width: 280px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      overflow: hidden;
      transition: transform 0.2s;
    }
    .item:hover {
      transform: scale(1.02);
    }
    .item img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      display: block; /* garante bloco sem ‚Äúsobras‚Äù inline */
    }
    .item-content {
      padding: 15px;
    }
    .item-content h3 {
      margin-top: 0;
      font-size: 18px;
    }
    .item-content p {
      margin: 6px 0;
      font-size: 14px;
    }
    .item button {
      background: linear-gradient(to right, #ff6b00, #ff9500);
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      width: 100%;
      cursor: pointer;
      font-weight: bold;
    }
    .cart-sidebar {
      position: fixed;
      top: 0;
      right: 0;
      width: 350px;
      height: 100%;
      background-color: white;
      box-shadow: -3px 0 10px rgba(0, 0, 0, 0.2);
      padding: 20px;
      transition: transform 0.3s ease; /* anima√ß√£o suave usando transform */
      z-index: 1000;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      transform: translateX(100%);     /* FECHADO: fora da tela, sem ‚Äúsobrar‚Äù no mobile */
      will-change: transform;
    }
    .cart-sidebar.open {
      right: 0;
      transform: translateX(0);        /* ABERTO */
    }
    .cart-sidebar h2 { margin-top: 0; font-size: 20px; }
    .cart-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      align-items: center;
    }
    .cart-item button {
      background: none;
      border: none;
      color: red;
      font-size: 16px;
      cursor: pointer;
    }
    .cart-total {
      margin-top: 10px;
      font-weight: bold;
      border-top: 1px solid #ddd;
      padding-top: 10px;
    }
    .cart-actions {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .btn-clear {
      background: #ff4d4d;
      color: white;
    }
    .btn-order {
      background: #25d366;
      color: white;
    }
    .btn-clear, .btn-order {
      font-size: 16px;
      font-weight: bold;
      padding: 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .close-btn {
      background: transparent;
      border: none;
      font-size: 20px;
      cursor: pointer;
      align-self: flex-end;
    }
    input[type="text"], select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .option-label {
      margin-top: 12px;
      font-weight: bold;
      display: block;
    }
    @media (max-width: 600px) {
      .item { width: 100%; }
      .cart-sidebar { width: 100%; }
      .cart-btn { top: 10px; right: 10px; padding: 10px; }
    }
  </style>
</head>
<body>

<header><span>üçî</span> DISTRITO - Hamburguesas Gourmet</header>
<button class="cart-btn" onclick="toggleCart()">üõí Ver carrito (<span id="contador">0</span>)</button>

<h2 class="section-title">üçî Hamburguesas</h2>
<div class="container">
  <div class="item">
    <img
      src="https://images.unsplash.com/photo-1601050690093-3f5ecf8249f5?w=800&auto=format&fit=crop&q=80"
      alt="Hamburguesa Cl√°sica"
      referrerpolicy="no-referrer"
      decoding="async"
      loading="lazy"
      onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22800%22 height=%22450%22><rect width=%22100%25%22 height=%22100%25%22 fill=%22%23eee%22/><text x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-family=%22Segoe UI%22 font-size=%2232%22 fill=%22%23999%22>Imagem%20indispon%C3%ADvel</text></svg>'"
    />
    <div class="item-content">
      <h3>Hamburguesa Cl√°sica</h3>
      <p>Carne 100% vacuna, queso cheddar, lechuga y tomate</p>
      <p><strong>Bs 35.00</strong></p>
      <button onclick="agregarAlCarrito('Hamburguesa Cl√°sica', 35)">Agregar</button>
    </div>
  </div>

  <div class="item">
    <img
      src="https://images.unsplash.com/photo-1606755962778-7f78f11b03b3?w=800&auto=format&fit=crop&q=80"
      alt="Hamburguesa BBQ"
      referrerpolicy="no-referrer"
      decoding="async"
      loading="lazy"
      onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22800%22 height=%22450%22><rect width=%22100%25%22 height=%22100%25%22 fill=%22%23eee%22/><text x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-family=%22Segoe UI%22 font-size=%2232%22 fill=%22%23999%22>Imagem%20indispon%C3%ADvel</text></svg>'"
    />
    <div class="item-content">
      <h3>Hamburguesa BBQ</h3>
      <p>Carne, cebolla caramelizada, bacon, salsa BBQ</p>
      <p><strong>Bs 42.00</strong></p>
      <button onclick="agregarAlCarrito('Hamburguesa BBQ', 42)">Agregar</button>
    </div>
  </div>
</div>

<h2 class="section-title">üçü Acompa√±amientos</h2>
<div class="container">
  <div class="item">
    <img
      src="https://images.unsplash.com/photo-1557167756-4f5e940bc5f8?w=800&auto=format&fit=crop&q=80"
      alt="Papas Fritas"
      referrerpolicy="no-referrer"
      decoding="async"
      loading="lazy"
      onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22800%22 height=%22450%22><rect width=%22100%25%22 height=%22100%25%22 fill=%22%23eee%22/><text x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-family=%22Segoe UI%22 font-size=%2232%22 fill=%22%23999%22>Imagem%20indispon%C3%ADvel</text></svg>'"
    />
    <div class="item-content">
      <h3>Papas Fritas</h3>
      <p>Crocantes y doradas, porci√≥n individual</p>
      <p><strong>Bs 10.00</strong></p>
      <button onclick="agregarAlCarrito('Papas Fritas', 10)">Agregar</button>
    </div>
  </div>
</div>

<h2 class="section-title">ü•§ Bebidas</h2>
<div class="container">
  <div class="item">
    <img
      src="https://images.unsplash.com/photo-1583337130417-3346a1e4a1c1?w=800&auto=format&fit=crop&q=80"
      alt="Coca-Cola"
      referrerpolicy="no-referrer"
      decoding="async"
      loading="lazy"
      onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22800%22 height=%22450%22><rect width=%22100%25%22 height=%22100%25%22 fill=%22%23eee%22/><text x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-family=%22Segoe UI%22 font-size=%2232%22 fill=%22%23999%22>Imagem%20indispon%C3%ADvel</text></svg>'"
    />
    <div class="item-content">
      <h3>Coca-Cola 500ml</h3>
      <p>Refresco tradicional para acompa√±ar tu combo</p>
      <p><strong>Bs 8.00</strong></p>
      <button onclick="agregarAlCarrito('Coca-Cola 500ml', 8)">Agregar</button>
    </div>
  </div>
</div>

<!-- Carrinho -->
<div class="cart-sidebar" id="cartSidebar">
  <button class="close-btn" onclick="toggleCart()">‚úñ</button>
  <h2>üõí Tu carrito</h2>
  <div id="carrito" class="cart-items"><p>No hay productos a√∫n.</p></div>
  <div class="cart-total" id="carrito-total"></div>

  <label class="option-label">Entrega:</label>
  <label><input type="radio" name="entrega" value="domicilio" checked onchange="toggleDireccion(true)"> A domicilio</label>
  <label><input type="radio" name="entrega" value="retiro" onchange="toggleDireccion(false)"> Retiro en local</label>

  <div id="direccion-container">
    <label class="option-label">Direcci√≥n:</label>
    <input type="text" id="direccion">
  </div>

  <label class="option-label">M√©todo de pago:</label>
  <select id="pago">
    <option value="efectivo">Efectivo</option>
    <option value="QR">QR</option>
  </select>

  <label class="option-label">Nota:</label>
  <textarea id="nota"></textarea>

  <label class="option-label">Cup√≥n de descuento:</label>
  <input type="text" id="cupon">

  <div class="cart-actions">
    <button class="btn-clear" onclick="vaciarCarrito()">üóë Vaciar carrito</button>
    <button class="btn-order" onclick="enviarPedido()">üì§ Enviar por WhatsApp</button>
  </div>
</div>

<script>
  let carrito = [];

  function toggleCart() {
    document.getElementById("cartSidebar").classList.toggle("open");
  }

  function agregarAlCarrito(nombre, precio) {
    carrito.push({ nombre, precio });
    actualizarCarrito();
    document.getElementById("cartSidebar").classList.add("open");
  }

  function actualizarCarrito() {
    const contenedor = document.getElementById("carrito");
    const totalDiv = document.getElementById("carrito-total");
    const contador = document.getElementById("contador");
    contenedor.innerHTML = "";
    let total = 0;

    if (carrito.length === 0) {
      contenedor.innerHTML = "<p>No hay productos a√∫n.</p>";
      totalDiv.innerHTML = "";
    } else {
      carrito.forEach((item, index) => {
        total += item.precio;
        contenedor.innerHTML += `
          <div class="cart-item">
            <span>${item.nombre}</span>
            <span>Bs ${item.precio.toFixed(2)}</span>
            <button onclick="removerItem(${index})">üóë</button>
          </div>`;
      });

      let cupom = document.getElementById("cupon").value.trim().toUpperCase();
      let desconto = cupom === "DESCUENTO10" ? total * 0.10 : 0;
      totalDiv.innerHTML = `Total: Bs ${(total - desconto).toFixed(2)} ${desconto ? "(con descuento aplicado)" : ""}`;
    }

    contador.textContent = carrito.length;
  }

  function removerItem(i) {
    carrito.splice(i, 1);
    actualizarCarrito();
  }

  function vaciarCarrito() {
    carrito = [];
    actualizarCarrito();
  }

  function toggleDireccion(show) {
    document.getElementById("direccion-container").style.display = show ? "block" : "none";
  }

  function enviarPedido() {
    if (carrito.length === 0) return alert("El carrito est√° vac√≠o.");

    const entrega = document.querySelector('input[name="entrega"]:checked').value;
    const direccion = document.getElementById("direccion").value.trim();
    const metodo = document.getElementById("pago").value;
    const nota = document.getElementById("nota").value.trim();
    const cupon = document.getElementById("cupon").value.trim().toUpperCase();

    let mensaje = "¬°Hola! Quiero hacer un pedido en DISTRITO:%0A";
    let total = 0;

    carrito.forEach(item => {
      mensaje += `- ${item.nombre}: Bs ${item.precio.toFixed(2)}%0A`;
      total += item.precio;
    });

    let descuento = cupon === "DESCUENTO10" ? total * 0.10 : 0;
    mensaje += `%0ATotal: Bs ${(total - descuento).toFixed(2)}`;
    if (cupon) mensaje += `%0ACup√≥n: ${cupon}`;
    mensagem = mensaje; /* no-op para manter sua estrutura original */
    mensagem = mensaje; /* repetido para garantir nenhuma quebra em ambientes que minificam */
    mensaje += `%0AEntrega: ${entrega}`;
    if (entrega === "domicilio" && direccion) mensaje += `%0ADirecci√≥n: ${direccion}`;
    mensaje += `%0APago: ${metodo}`;
    if (nota) mensaje += `%0ANota: ${nota}`;

    const tel = "59171234567"; // Altere para n√∫mero real
    window.open(`https://wa.me/${tel}?text=${mensaje}`, '_blank');
  }

  window.onload = () => toggleDireccion(true);
</script>
</body>
</html>